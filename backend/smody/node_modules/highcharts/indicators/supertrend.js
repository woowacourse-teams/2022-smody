/*
 Highstock JS v9.2.2 (2021-08-24)

 Indicator series type for Highcharts Stock

 (c) 2010-2021 Wojciech Chmiel

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/indicators/supertrend",["highcharts","highcharts/modules/stock"],function(n){a(n);a.Highcharts=n;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function n(a,n,e,B){a.hasOwnProperty(n)||(a[n]=B.apply(null,e))}a=a?a._modules:{};n(a,"Stock/Indicators/Supertrend/SupertrendIndicator.js",[a["Core/Color/Palette.js"],
a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"],a["Core/Chart/StockChart.js"]],function(a,n,e,B){function y(a,f,c){return{index:f,close:a.yData[f][c],x:a.xData[f]}}var E=this&&this.__extends||function(){var a=function(f,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var a in c)c.hasOwnProperty(a)&&(b[a]=c[a])};return a(f,c)};return function(f,c){function b(){this.constructor=f}a(f,c);f.prototype=null===c?Object.create(c):(b.prototype=
c.prototype,new b)}}(),z=n.seriesTypes,F=z.atr,A=z.sma,G=e.addEvent,D=e.correctFloat,H=e.isArray;z=e.extend;var x=e.merge,I=e.objectEach;e=function(e){function f(){var c=null!==e&&e.apply(this,arguments)||this;c.data=void 0;c.linkedParent=void 0;c.options=void 0;c.points=void 0;return c}E(f,e);f.prototype.init=function(){var c;A.prototype.init.apply(this,arguments);var b=this,a=G(B,"afterLinkSeries",function(){if(b.options){var C=b.options;c=b.linkedParent.options;C.cropThreshold=c.cropThreshold-
(C.params.period-1)}a()},{order:1})};f.prototype.drawGraph=function(){var c=this,b=c.options,a=c.linkedParent,e=a?a.points:[],f=c.points,n=c.graph,t=f.length,u=e.length-t;u=0<u?u:0;for(var w={options:{gapSize:b.gapSize}},m={top:[],bottom:[],intersect:[]},v={top:{styles:{lineWidth:b.lineWidth,lineColor:b.fallingTrendColor||b.color,dashStyle:b.dashStyle}},bottom:{styles:{lineWidth:b.lineWidth,lineColor:b.risingTrendColor||b.color,dashStyle:b.dashStyle}},intersect:b.changeTrendLine},d,l,g,h,k,p,q,r;t--;)d=
f[t],l=f[t-1],g=e[t-1+u],h=e[t-2+u],k=e[t+u],p=e[t+u+1],q=d.options.color,r={x:d.x,plotX:d.plotX,plotY:d.plotY,isNull:!1},!h&&g&&a.yData[g.index-1]&&(h=y(a,g.index-1,3)),!p&&k&&a.yData[k.index+1]&&(p=y(a,k.index+1,3)),!g&&h&&a.yData[h.index+1]?g=y(a,h.index+1,3):!g&&k&&a.yData[k.index-1]&&(g=y(a,k.index-1,3)),d&&g&&k&&h&&d.x!==g.x&&(d.x===k.x?(h=g,g=k):d.x===h.x?(g=h,h={close:a.yData[g.index-1][3],x:a.xData[g.index-1]}):p&&d.x===p.x&&(g=p,h=k)),l&&h&&g?(k={x:l.x,plotX:l.plotX,plotY:l.plotY,isNull:!1},
d.y>=g.close&&l.y>=h.close?(d.color=q||b.fallingTrendColor||b.color,m.top.push(r)):d.y<g.close&&l.y<h.close?(d.color=q||b.risingTrendColor||b.color,m.bottom.push(r)):(m.intersect.push(r),m.intersect.push(k),m.intersect.push(x(k,{isNull:!0})),d.y>=g.close&&l.y<h.close?(d.color=q||b.fallingTrendColor||b.color,l.color=q||b.risingTrendColor||b.color,m.top.push(r),m.top.push(x(k,{isNull:!0}))):d.y<g.close&&l.y>=h.close&&(d.color=q||b.risingTrendColor||b.color,l.color=q||b.fallingTrendColor||b.color,m.bottom.push(r),
m.bottom.push(x(k,{isNull:!0}))))):g&&(d.y>=g.close?(d.color=q||b.fallingTrendColor||b.color,m.top.push(r)):(d.color=q||b.risingTrendColor||b.color,m.bottom.push(r)));I(m,function(a,b){c.points=a;c.options=x(v[b].styles,w);c.graph=c["graph"+b+"Line"];A.prototype.drawGraph.call(c);c["graph"+b+"Line"]=c.graph});c.points=f;c.options=b;c.graph=n};f.prototype.getValues=function(a,b){var c=b.period;b=b.multiplier;var e=a.xData,f=a.yData,n=[],t=[],u=[],w=0===c?0:c-1,m=[],v=[],d;if(!(e.length<=c||!H(f[0])||
4!==f[0].length||0>c)){a=F.prototype.getValues.call(this,a,{period:c}).yData;for(d=0;d<a.length;d++){var l=f[w+d];var g=f[w+d-1]||[];var h=m[d-1];var k=v[d-1];var p=u[d-1];0===d&&(h=k=p=0);c=D((l[1]+l[2])/2+b*a[d]);var q=D((l[1]+l[2])/2-b*a[d]);m[d]=c<h||g[3]>h?c:h;v[d]=q>k||g[3]<k?q:k;if(p===h&&l[3]<m[d]||p===k&&l[3]<v[d])var r=m[d];else if(p===h&&l[3]>m[d]||p===k&&l[3]>v[d])r=v[d];n.push([e[w+d],r]);t.push(e[w+d]);u.push(r)}return{values:n,xData:t,yData:u}}};f.defaultOptions=x(A.defaultOptions,
{params:{index:void 0,multiplier:3,period:10},risingTrendColor:a.positiveColor,fallingTrendColor:a.negativeColor,changeTrendLine:{styles:{lineWidth:1,lineColor:a.neutralColor80,dashStyle:"LongDash"}}});return f}(A);z(e.prototype,{nameBase:"Supertrend",nameComponents:["multiplier","period"],requiredIndicators:["atr"]});n.registerSeriesType("supertrend",e);"";return e});n(a,"masters/indicators/supertrend.src.js",[],function(){})});
//# sourceMappingURL=supertrend.js.map