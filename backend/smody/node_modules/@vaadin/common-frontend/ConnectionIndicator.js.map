{"version":3,"file":"ConnectionIndicator.js","sourceRoot":"","sources":["src/ConnectionIndicator.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright 2000-2020 Vaadin Ltd.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy of\n * the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\nimport { html, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { ConnectionState, ConnectionStateStore } from './ConnectionState.js';\n\nconst DEFAULT_STYLE_ID = 'css-loading-indicator';\n\n/**\n * The loading indicator states\n */\nexport const enum LoadingBarState {\n  IDLE = '',\n  FIRST = 'first',\n  SECOND = 'second',\n  THIRD = 'third',\n}\n\n/**\n * Component showing loading and connection indicator. When added to DOM,\n * listens for changes on `window.Vaadin.connectionState` ConnectionStateStore.\n */\nexport class ConnectionIndicator extends LitElement {\n  /**\n   * Initialize global connection indicator instance at\n   * window.Vaadin.connectionIndicator and add instance to the document body.\n   */\n  static create(): ConnectionIndicator {\n    const $wnd = window as any;\n    if (!$wnd.Vaadin?.connectionIndicator) {\n      $wnd.Vaadin = $wnd.Vaadin || {};\n      $wnd.Vaadin.connectionIndicator = document.createElement('vaadin-connection-indicator');\n      document.body.appendChild($wnd.Vaadin.connectionIndicator);\n    }\n    return $wnd.Vaadin?.connectionIndicator as ConnectionIndicator;\n  }\n\n  /**\n   * The delay before showing the loading indicator, in ms.\n   */\n  @property({ type: Number })\n  firstDelay = 300;\n\n  /**\n   * The delay before the loading indicator goes into \"second\" state, in ms.\n   */\n  @property({ type: Number })\n  secondDelay = 1500;\n\n  /**\n   * The delay before the loading indicator goes into \"third\" state, in ms.\n   */\n  @property({ type: Number })\n  thirdDelay = 5000;\n\n  /**\n   * The duration for which the connection state change message is visible,\n   * in ms.\n   */\n  @property({ type: Number })\n  expandedDuration = 2000;\n\n  /**\n   * The message shown when the connection goes to connected state.\n   */\n  @property({ type: String })\n  onlineText = 'Online';\n\n  /**\n   * The message shown when the connection goes to lost state.\n   */\n  @property({ type: String })\n  offlineText = 'Connection lost';\n\n  /**\n   * The message shown when the connection goes to reconnecting state.\n   */\n  @property({ type: String })\n  reconnectingText = 'Connection lost, trying to reconnect...';\n\n  @property({ type: Boolean, reflect: true })\n  private offline = false;\n\n  @property({ type: Boolean, reflect: true })\n  private reconnecting = false;\n\n  @property({ type: Boolean, reflect: true })\n  private expanded = false;\n\n  @property({ type: Boolean, reflect: true })\n  private loading = false;\n\n  @property({ type: String })\n  private loadingBarState: LoadingBarState = LoadingBarState.IDLE;\n\n  private applyDefaultThemeState = true;\n\n  private firstTimeout = 0;\n\n  private secondTimeout = 0;\n\n  private thirdTimeout = 0;\n\n  private expandedTimeout = 0;\n\n  private connectionStateStore?: ConnectionStateStore;\n\n  private readonly connectionStateListener: () => void;\n\n  private lastMessageState: ConnectionState = ConnectionState.CONNECTED;\n\n  constructor() {\n    super();\n\n    this.connectionStateListener = () => {\n      this.expanded = this.updateConnectionState();\n      this.expandedTimeout = this.timeoutFor(\n        this.expandedTimeout,\n        this.expanded,\n        () => {\n          this.expanded = false;\n        },\n        this.expandedDuration\n      );\n    };\n  }\n\n  render() {\n    return html`\n      <div class=\"v-loading-indicator ${this.loadingBarState}\" style=${this.getLoadingBarStyle()}></div>\n\n      <div\n        class=\"v-status-message ${classMap({\n          active: this.reconnecting,\n        })}\"\n      >\n        <span class=\"text\"> ${this.renderMessage()} </span>\n      </div>\n    `;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    const $wnd = window as any;\n    if ($wnd.Vaadin?.connectionState) {\n      this.connectionStateStore = $wnd.Vaadin.connectionState as ConnectionStateStore;\n      this.connectionStateStore.addStateChangeListener(this.connectionStateListener);\n      this.updateConnectionState();\n    }\n\n    this.updateTheme();\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this.connectionStateStore) {\n      this.connectionStateStore.removeStateChangeListener(this.connectionStateListener);\n    }\n\n    this.updateTheme();\n  }\n\n  @property({ type: Boolean })\n  get applyDefaultTheme() {\n    return this.applyDefaultThemeState;\n  }\n\n  set applyDefaultTheme(applyDefaultTheme: boolean) {\n    if (applyDefaultTheme !== this.applyDefaultThemeState) {\n      this.applyDefaultThemeState = applyDefaultTheme;\n      this.updateTheme();\n    }\n  }\n\n  protected createRenderRoot() {\n    return this;\n  }\n\n  /**\n   * Update state flags.\n   *\n   * @return true if the connection message changes, and therefore a new\n   * message should be shown\n   */\n  private updateConnectionState(): boolean {\n    const state = this.connectionStateStore?.state;\n    this.offline = state === ConnectionState.CONNECTION_LOST;\n    this.reconnecting = state === ConnectionState.RECONNECTING;\n    this.updateLoading(state === ConnectionState.LOADING);\n    if (this.loading) {\n      // Entering loading state, do not show message\n      return false;\n    }\n\n    if (state !== this.lastMessageState) {\n      this.lastMessageState = state!;\n      // Message changes, show new message\n      return true;\n    }\n\n    // Message did not change\n    return false;\n  }\n\n  private updateLoading(loading: boolean) {\n    this.loading = loading;\n    this.loadingBarState = LoadingBarState.IDLE;\n\n    this.firstTimeout = this.timeoutFor(\n      this.firstTimeout,\n      loading,\n      () => {\n        this.loadingBarState = LoadingBarState.FIRST;\n      },\n      this.firstDelay\n    );\n\n    this.secondTimeout = this.timeoutFor(\n      this.secondTimeout,\n      loading,\n      () => {\n        this.loadingBarState = LoadingBarState.SECOND;\n      },\n      this.secondDelay\n    );\n\n    this.thirdTimeout = this.timeoutFor(\n      this.thirdTimeout,\n      loading,\n      () => {\n        this.loadingBarState = LoadingBarState.THIRD;\n      },\n      this.thirdDelay\n    );\n  }\n\n  private renderMessage() {\n    if (this.reconnecting) {\n      return this.reconnectingText;\n    }\n\n    if (this.offline) {\n      return this.offlineText;\n    }\n\n    return this.onlineText;\n  }\n\n  private updateTheme() {\n    if (this.applyDefaultThemeState && this.isConnected) {\n      if (!document.getElementById(DEFAULT_STYLE_ID)) {\n        const style = document.createElement('style');\n        style.id = DEFAULT_STYLE_ID;\n        style.textContent = this.getDefaultStyle();\n        document.head.appendChild(style);\n      }\n    } else {\n      const style = document.getElementById(DEFAULT_STYLE_ID);\n      if (style) {\n        document.head.removeChild(style);\n      }\n    }\n  }\n\n  private getDefaultStyle(): string {\n    return `\n      @keyframes v-progress-start {\n        0% {\n          width: 0%;\n        }\n        100% {\n          width: 50%;\n        }\n      }\n      @keyframes v-progress-delay {\n        0% {\n          width: 50%;\n        }\n        100% {\n          width: 90%;\n        }\n      }\n      @keyframes v-progress-wait {\n        0% {\n          width: 90%;\n          height: 4px;\n        }\n        3% {\n          width: 91%;\n          height: 7px;\n        }\n        100% {\n          width: 96%;\n          height: 7px;\n        }\n      }\n      @keyframes v-progress-wait-pulse {\n        0% {\n          opacity: 1;\n        }\n        50% {\n          opacity: 0.1;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n      .v-loading-indicator,\n      .v-status-message {\n        position: fixed;\n        z-index: 251;\n        left: 0;\n        right: auto;\n        top: 0;\n        background-color: var(--lumo-primary-color, var(--material-primary-color, blue));\n        transition: none;\n      }\n      .v-loading-indicator {\n        width: 50%;\n        height: 4px;\n        opacity: 1;\n        pointer-events: none;\n        animation: v-progress-start 1000ms 200ms both;\n      }\n      .v-loading-indicator[style*='none'] {\n        display: block !important;\n        width: 100%;\n        opacity: 0;\n        animation: none;\n        transition: opacity 500ms 300ms, width 300ms;\n      }\n      .v-loading-indicator.second {\n        width: 90%;\n        animation: v-progress-delay 3.8s forwards;\n      }\n      .v-loading-indicator.third {\n        width: 96%;\n        animation: v-progress-wait 5s forwards, v-progress-wait-pulse 1s 4s infinite backwards;\n      }\n\n      vaadin-connection-indicator[offline] .v-loading-indicator,\n      vaadin-connection-indicator[reconnecting] .v-loading-indicator {\n        display: none;\n      }\n\n      .v-status-message {\n        opacity: 0;\n        width: 100%;\n        max-height: var(--status-height-collapsed, 8px);\n        overflow: hidden;\n        background-color: var(--status-bg-color-online, var(--lumo-primary-color, var(--material-primary-color, blue)));\n        color: var(\n          --status-text-color-online,\n          var(--lumo-primary-contrast-color, var(--material-primary-contrast-color, #fff))\n        );\n        font-size: 0.75rem;\n        font-weight: 600;\n        line-height: 1;\n        transition: all 0.5s;\n        padding: 0 0.5em;\n      }\n\n      vaadin-connection-indicator[offline] .v-status-message,\n      vaadin-connection-indicator[reconnecting] .v-status-message {\n        opacity: 1;\n        background-color: var(--status-bg-color-offline, var(--lumo-shade, #333));\n        color: var(\n          --status-text-color-offline,\n          var(--lumo-primary-contrast-color, var(--material-primary-contrast-color, #fff))\n        );\n        background-image: repeating-linear-gradient(\n          45deg,\n          rgba(255, 255, 255, 0),\n          rgba(255, 255, 255, 0) 10px,\n          rgba(255, 255, 255, 0.1) 10px,\n          rgba(255, 255, 255, 0.1) 20px\n        );\n      }\n\n      vaadin-connection-indicator[reconnecting] .v-status-message {\n        animation: show-reconnecting-status 2s;\n      }\n\n      vaadin-connection-indicator[offline] .v-status-message:hover,\n      vaadin-connection-indicator[reconnecting] .v-status-message:hover,\n      vaadin-connection-indicator[expanded] .v-status-message {\n        max-height: var(--status-height, 1.75rem);\n      }\n\n      vaadin-connection-indicator[expanded] .v-status-message {\n        opacity: 1;\n      }\n\n      .v-status-message span {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: var(--status-height, 1.75rem);\n      }\n\n      vaadin-connection-indicator[reconnecting] .v-status-message span::before {\n        content: '';\n        width: 1em;\n        height: 1em;\n        border-top: 2px solid\n          var(--status-spinner-color, var(--lumo-primary-color, var(--material-primary-color, blue)));\n        border-left: 2px solid\n          var(--status-spinner-color, var(--lumo-primary-color, var(--material-primary-color, blue)));\n        border-right: 2px solid transparent;\n        border-bottom: 2px solid transparent;\n        border-radius: 50%;\n        box-sizing: border-box;\n        animation: v-spin 0.4s linear infinite;\n        margin: 0 0.5em;\n      }\n\n      @keyframes v-spin {\n        100% {\n          transform: rotate(360deg);\n        }\n      }\n    `;\n  }\n\n  private getLoadingBarStyle(): string {\n    switch (this.loadingBarState) {\n      case LoadingBarState.IDLE:\n        return 'display: none';\n      case LoadingBarState.FIRST:\n      case LoadingBarState.SECOND:\n      case LoadingBarState.THIRD:\n        return 'display: block';\n      default:\n        return '';\n    }\n  }\n\n  private timeoutFor(timeoutId: number, enabled: boolean, handler: () => void, delay: number): number {\n    if (timeoutId !== 0) {\n      window.clearTimeout(timeoutId);\n    }\n\n    return enabled ? window.setTimeout(handler, delay) : 0;\n  }\n\n  static get instance(): ConnectionIndicator {\n    return ConnectionIndicator.create();\n  }\n}\n\nif (customElements.get('vaadin-connection-indicator') === undefined) {\n  customElements.define('vaadin-connection-indicator', ConnectionIndicator);\n}\n\n/**\n * The global connection indicator object. Its appearance and behavior can be\n * configured via properties:\n *\n * connectionIndicator.firstDelay = 0;\n * connectionIndicator.onlineText = 'The application is online';\n *\n * To avoid altering the appearance while the indicator is active, apply the\n * configuration in your application 'frontend/index.ts' file.\n */\nexport const connectionIndicator = ConnectionIndicator.instance;\n"]}